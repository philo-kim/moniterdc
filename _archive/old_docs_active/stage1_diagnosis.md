# 1단계 문제 진단 및 개선 방안

**작성일**: 2025-10-14
**목적**: 표면층(explicit_claims) 추출 품질 개선

---

## 🔍 문제점 진단

### 현재 상황

**파일**: `engines/analyzers/reasoning_structure_extractor.py` (40-112줄)

**현재 프롬프트 구조**:
```python
prompt = f"""
다음은 DC Gallery 정치 글의 추론 구조 분석 결과입니다:

제목: {content['title']}
내용: {content['body'][:2000]}

---

이 글의 **추론 구조**를 분석해주세요:

1. **추론 메커니즘** (해당되는 것 모두):
   - 즉시_단정: 관찰 → (중간 과정 생략) → 결론
   - 필연적_인과: X → 반드시/곧/필연적으로 → Y
   - 표면_부정: 표면은 X / 실제는 Y
   - 역사_투사: 과거 패턴 → 현재 반복
   - 네트워크_추론: 연결 → 조직적 공모

...

JSON 형식으로 출력:
{
  "mechanisms": ["즉시_단정", ...],
  "explicit_claims": [...],
  "implicit_assumptions": [...],
  "deep_beliefs": [...],
  ...
}
"""
```

### 발견된 문제들

#### 문제 1: 표면층이 너무 메타적/분석적

**실제 데이터 예시**:
```json
{
  "subject": "이영돈TV 영상",
  "predicate": "충격적이니 모두 보라고 권유한다",
  "evidence_cited": null,
  "quote": null
}
```

**문제**: 이건 글쓴이의 **행동 묘사**이지 **정치적 주장**이 아님
- "충격적이니 보라"는 것은 세계관과 무관한 일반적 표현
- 세계관 형성에 기여하지 않는 메타 정보

#### 문제 2: 중요하지 않은 부분 추출

**실제 데이터 예시**:
```json
{
  "subject": "온라인 맘카페",
  "predicate": "실종신고가 급증했다는 글이 많이 올라온다고 주장한다"
}
```

**문제**: 이건 **관찰 사실 전달**이지 글쓴이의 **해석/판단**이 아님
- 실제 중요한 것: "중국 범죄조직이 무비자로 잠입해서 장기밀매한다"
- 맘카페 언급은 단순 증거 제시

#### 문제 3: 구조가 복잡하고 불필요한 필드

**현재 구조**:
```json
{
  "subject": "...",
  "predicate": "...",
  "evidence_cited": "...",
  "quote": "..."
}
```

**문제**:
- subject/predicate 분리가 오히려 추출을 어렵게 만듦
- 세계관 분석에 필요한 것은 "핵심 주장" 자체이지 문법 구조가 아님

#### 문제 4: 암묵층/심층과 명확히 구분 안 됨

**현재 상황**:
- 표면층: "민주당이 정보를 얻었다"
- 암묵층: "민주당은 통신사를 협박해서 정보를 얻는다"
- 심층: "민주당/좌파는 독재정권처럼 사찰로 반대파를 제거한다"

**문제**: 3층이 점진적으로 깊어져야 하는데, 표면층이 너무 사소한 것만 잡고 있음

---

## 🎯 핵심 인사이트

### 표면층이 담아야 할 것

**✅ 필요한 것**:
- 글쓴이의 **핵심 정치적 주장**
- 세계관 형성에 **직접 기여하는 판단**
- "누가 무엇을 했다/할 것이다"의 **해석**

**❌ 불필요한 것**:
- 글쓴이의 권유/요청 같은 메타 표현
- 단순 사실 전달 (뉴스 인용 등)
- 증거 나열 (맘카페에 글이 많다 등)

### 실제 필요한 표면층 예시

**게시글 1**: "민주, 지귀연 핸드폰 교체 어떻게 알았나"

**현재 추출** (문제):
- "나경원 의원이 SNS에 글을 올렸다"
- "민주당이 정보를 알고 있다"

**개선 목표**:
- "민주당이 지귀연의 유심교체 정보를 불법 사찰로 얻었다"
- "민주당이 통신사를 협박해서 개인정보를 빼냈다"
- "민주당이 맘에 안드는 판사를 사찰하고 있다"

**게시글 2**: "계엄 포고문 첫줄에 목적이 나옴"

**현재 추출** (문제):
- "계엄 포고문 첫줄에 목적이 나온다"

**개선 목표**:
- "윤석열의 계엄은 자유민주주의를 수호하기 위한 것이었다"
- "계엄은 평화적으로 이루어졌고 폭력이 없었다"
- "국회 의결에 따라 3시간만에 해제된 것은 정당한 절차였다"

**게시글 3**: "자유대학 개천절 집회 제한통고"

**현재 추출** (문제):
- "경찰이 제한통고를 했다"
- "침묵시위를 했다"

**개선 목표**:
- "경찰이 보수 집회에만 불공정하게 제한통고를 남발한다"
- "좌파가 보수 집회를 물리력으로 방해하고 파괴한다"
- "당국이 사건 책임을 집회 측에 전가한다"

---

## 💡 개선 방향

### 방향 1: 필터링 강화

**전략**: "세계관과 관련된 것만" 명시적으로 요구

```
표면층은 다음 조건을 만족해야 함:
- 정치적 행위자의 의도/행동에 대한 판단
- 세계관 형성에 기여하는 해석
- 글쓴이의 핵심 주장 (메타 표현 제외)

제외할 것:
- 단순 사실 전달 (뉴스 인용)
- 글쓴이의 권유/요청
- 증거 나열
```

### 방향 2: 구조 단순화

**현재**:
```json
{
  "subject": "민주당",
  "predicate": "사찰했다",
  "evidence_cited": "...",
  "quote": "..."
}
```

**개선**:
```json
[
  "민주당이 통신사를 협박해서 개인 사찰 정보를 얻는다",
  "민주당이 맘에 안드는 판사를 표적 사찰한다"
]
```

단순 문자열 배열로 충분. 문법 구조 분해 불필요.

### 방향 3: 3층 구분 명확화

**명확한 기준 제시**:
```
표면층: 글쓴이가 **이번 사건에 대해** 내린 판단
  예: "이번에 민주당이 사찰했다"

암묵층: 글쓴이가 **일반적으로** 믿는 패턴
  예: "민주당은 항상 이런 식으로 사찰한다"

심층: 글쓴이 진영의 **세계관**
  예: "좌파는 독재 본성을 가졌다"
```

### 방향 4: 예시 중심 프롬프트

**좋은 예/나쁜 예를 더 많이 제시**:
```
❌ 나쁜 표면층: "이영돈TV 영상을 보라고 권유한다"
✅ 좋은 표면층: "중국 범죄조직이 무비자로 잠입해 장기밀매를 한다"

❌ 나쁜 표면층: "맘카페에 실종 글이 많다"
✅ 좋은 표면층: "실종 증가는 중국 범죄조직의 활동 증거다"
```

---

## 🧪 테스트 전략

### 테스트 대상 게시글 3개

1. **게시글 1**: 민주당 사찰 관련 (정치 공격)
2. **게시글 2**: 윤석열 계엄 옹호 (정치 옹호)
3. **게시글 3**: 보수 집회 탄압 비판 (절차 불공정)

### 프롬프트 버전 4가지

**Version 1: 필터링 강화**
- "세계관과 관련된 핵심 주장만" 명시

**Version 2: 구조 단순화**
- subject/predicate 제거, 문자열 배열로

**Version 3: 3층 명확화**
- 이번 사건 vs 일반 패턴 vs 세계관 구분

**Version 4: 예시 강화**
- 좋은 예/나쁜 예 5개씩 제시

### 평가 기준

각 버전별로:
1. **적합성**: 세계관 관련 주장만 추출했는가?
2. **명확성**: 표면/암묵/심층이 구분되는가?
3. **간결성**: 불필요한 내용이 없는가?
4. **일관성**: 여러 글에서 일관된 품질인가?

---

**다음 단계**: 4가지 프롬프트 버전 작성 및 테스트 스크립트 실행

# 1단계 프롬프트 테스트 결과 분석

**작성일**: 2025-10-14
**테스트 대상**: 3개 게시글 × 4개 프롬프트 버전

---

## 📊 양적 비교

### 추출된 explicit_claims 개수

| 게시글 | V1_필터링강화 | V2_구조단순화 | V3_3층명확화 | V4_예시강화 |
|--------|---------------|---------------|--------------|-------------|
| 글1 (민주당 사찰) | 1개 | 2개 | 2개 | 2개 |
| 글2 (계엄 옹호) | 2개 | 2개 | 2개 | 2개 |
| 글3 (집회 탄압) | 1개 | 2개 | 2개 | 2개 |

**관찰**:
- V1만 일관되게 적게 추출 (과도한 필터링?)
- V2, V3, V4는 일관된 결과 (각 2개씩)

---

## 🔍 질적 비교

### 글1: "민주당 사찰" 게시글

#### V1 (필터링강화)
```json
{
  "explicit_claims": [
    {
      "subject": "민주당",
      "predicate": "통신사를 협박해 개인정보를 불법 취득했다",
      "evidence_cited": "유심교체 정보 사전 파악",
      "quote": "유심교체를 어떻게 알아"
    }
  ]
}
```

**평가**:
- ✅ 핵심 주장 포착
- ❌ 1개만 추출 (너무 보수적)
- ❌ 구조 복잡 (subject/predicate/evidence/quote)

#### V2 (구조단순화)
```json
{
  "explicit_claims": [
    "민주당이 통신사를 협박해 개인 사찰 정보를 얻는다",
    "민주당이 맘에 안드는 판사를 표적 사찰한다"
  ]
}
```

**평가**:
- ✅ 핵심 주장 2개 포착
- ✅ 구조 단순 (문자열 배열)
- ✅ 읽기 쉬움

#### V3 (3층명확화)
```json
{
  "explicit_claims": [
    "이번에 민주당이 지귀연 정보를 불법 사찰했다",
    "민주당이 통신사를 협박해 정보를 얻었다"
  ],
  "implicit_assumptions": [
    "민주당은 항상 통신사를 협박해 개인정보를 얻는다",
    "민주당은 맘에 안드는 판사를 표적 사찰한다"
  ],
  "deep_beliefs": [
    "좌파는 과거 독재정권처럼 사찰로 반대파를 제거한다",
    "지금의 작은 사찰이 전면적 감시독재로 발전한다"
  ]
}
```

**평가**:
- ✅ 3층 구분 명확!
- ✅ explicit: "이번에" (특정 사건)
- ✅ implicit: "항상" (일반 패턴)
- ✅ deep: "과거~처럼" (세계관)
- ⚠️ explicit에 "맘에 안드는 판사"가 빠짐 (implicit에 있음)

#### V4 (예시강화)
```json
{
  "explicit_claims": [
    "민주당이 통신사를 협박해 지귀연 개인정보를 불법 취득했다",
    "민주당이 맘에 안드는 판사를 표적 사찰한다"
  ],
  "implicit_assumptions": [
    "민주당은 항상 통신사를 협박해 반대파 정보를 얻는다",
    "사법부 인사까지 사찰 대상으로 삼는다"
  ],
  "deep_beliefs": [
    "좌파는 과거 독재정권처럼 사찰과 탄압으로 권력을 유지한다",
    "지금의 작은 사찰이 전면적 감시독재 사회로 발전한다"
  ]
}
```

**평가**:
- ✅ 핵심 주장 완전 포착
- ✅ 3층 구분 명확
- ✅ explicit에 중요 내용 모두 포함

---

### 글2: "계엄 옹호" 게시글

#### 핵심 비교

**V1**: 구조 복잡, 내용은 양호
**V2**: 단순하지만 내용 평이
**V3**: 3층 구분이 약함 (implicit이 너무 짧음)
**V4**: 3층 구분 양호, 내용 적절

**V4 결과**:
```json
{
  "explicit_claims": [
    "계엄의 목적은 자유민주주의 수호와 국민의 안전 보호이다",
    "계엄은 평화적으로 이루어졌으며 폭력적인 일이 없었다"
  ],
  "implicit_assumptions": [
    "계엄령은 자유민주주의 수호를 위한 정당한 조치이다",
    "계엄의 목적이 수단보다 우선한다"
  ],
  "deep_beliefs": [
    "계엄은 필연적으로 자유민주주의를 수호하기 위한 것이다",
    "계엄은 폭력적이지 않으며, 국민의 일상생활을 보호한다"
  ]
}
```

**평가**: 3층이 점진적으로 깊어짐 ✅

---

### 글3: "집회 탄압" 게시글

#### V3 vs V4 비교

**V3**:
```json
{
  "explicit_claims": [
    "극좌 인물이 버스 창문을 깼다",  // ⚠️ 너무 사실적
    "그 행동이 집회 제한의 원인으로 해석되었다"
  ]
}
```

**V4**:
```json
{
  "explicit_claims": [
    "극좌 인물이 집회를 방해하기 위해 버스창문을 깼다",  // ✅ 의도 포함
    "극좌 인물의 행동이 집회 결사의 자유를 침해했다"  // ✅ 정치적 판단
  ]
}
```

**차이**:
- V3: "창문을 깼다" (사실 전달)
- V4: "집회를 방해하기 위해" (의도 해석) ← 더 좋음!

---

## 💡 종합 평가

### 각 버전 장단점

#### V1 (필터링강화)
**장점**:
- 핵심만 추출 (노이즈 최소)

**단점**:
- 너무 보수적 (중요한 것도 누락)
- 구조 복잡 (subject/predicate/evidence/quote)
- 일관성 낮음 (1-2개로 변동)

**점수**: ⭐⭐⭐☆☆

#### V2 (구조단순화)
**장점**:
- 구조 간단 (문자열 배열)
- 읽기 쉬움
- 적절한 개수 (2개)

**단점**:
- 3층 구분이 다소 애매
- 필터링 기준 불명확

**점수**: ⭐⭐⭐⭐☆

#### V3 (3층명확화)
**장점**:
- 3층 구분 명확한 가이드
- "이번에" vs "항상" vs "본질" 구분

**단점**:
- 실제 결과에서 구분이 완벽하지 않음
- explicit이 때로 너무 사실적 ("창문을 깼다")

**점수**: ⭐⭐⭐⭐☆

#### V4 (예시강화)
**장점**:
- 좋은 예/나쁜 예 명확
- 3층 구분 잘 됨
- 적절한 개수와 품질
- 의도 해석까지 포함

**단점**:
- 프롬프트가 가장 길음 (비용 증가)

**점수**: ⭐⭐⭐⭐⭐

---

## 🎯 최종 권장사항

### 1위: **V4 (예시강화)** ✨

**선정 이유**:
1. 가장 일관된 품질
2. 3층 구분 명확
3. 핵심 주장 완전 포착
4. "의도 해석"까지 포함 (단순 사실 아님)

**개선 포인트**:
- 프롬프트 길이 최적화 (비용 절감)
- 예시를 3개로 줄여도 효과적일 것

### 2위: V3 (3층명확화)

**장점**:
- 3층 구분 가이드 우수
- 프롬프트 간결

**문제**:
- "창문을 깼다" 같은 사실 전달도 추출
- V4만큼 안정적이지 않음

### 3위: V2 (구조단순화)

**장점**:
- 구조 단순 (문자열 배열)
- 가장 짧은 프롬프트

**문제**:
- 3층 구분 약함
- 필터링 기준 불명확

---

## 📝 최종 프롬프트 (V4 기반 개선)

```python
def get_optimized_prompt(content):
    return f"""
다음은 DC Gallery 정치 글입니다:

제목: {content['title']}
내용: {content['body'][:2000]}

---

이 글의 **3층 추론 구조**를 분석해주세요.

## 표면층 (explicit_claims) 추출 가이드

**제외할 것 ❌:**
- "영상을 보라" (메타 표현)
- "맘카페에 글이 많다" (단순 관찰)
- "경찰이 제한통고를 했다" (중립적 사실)

**포함할 것 ✅:**
- "민주당이 통신사를 협박해 개인 사찰 정보를 얻는다" (정치적 판단)
- "경찰이 보수 집회에만 불공정하게 제한통고를 남발한다" (해석 + 의도)
- "좌파가 집회를 방해하기 위해 물리력을 쓴다" (행위 + 목적)

## 3층 구분

**표면층 (explicit_claims)**: 이번 사건의 핵심 주장
- 구체적 사건/인물에 대한 판단
- 행위자의 의도/목적 포함

**암묵층 (implicit_assumptions)**: 일반 패턴
- "~는 항상/일반적으로 ~한다"
- 습관적 행동 패턴

**심층 (deep_beliefs)**: 진영의 세계관
- 본질 규정 ("~의 본질은 ~이다")
- 역사 연결 ("과거~처럼")
- 세상의 작동 원리

---

JSON 형식:
{{
  "mechanisms": ["즉시_단정", "필연적_인과", ...],
  "actor": {{
    "subject": "...",
    "purpose": "...",
    "methods": ["...", "..."]
  }},
  "logic_chain": ["...", "...", "..."],
  "explicit_claims": [
    "민주당이 통신사를 협박해 지귀연 개인정보를 불법 취득했다",
    "민주당이 맘에 안드는 판사를 표적 사찰한다"
  ],
  "implicit_assumptions": [
    "민주당은 항상 통신사를 협박해 반대파 정보를 얻는다",
    "사법부 인사까지 사찰 대상으로 삼는다"
  ],
  "deep_beliefs": [
    "좌파는 과거 독재정권처럼 사찰과 탄압으로 권력을 유지한다",
    "지금의 작은 사찰이 전면적 감시독재 사회로 발전한다"
  ]
}}
"""
```

---

## 🚀 다음 단계

1. ✅ V4 프롬프트를 `reasoning_structure_extractor.py`에 적용
2. ⏳ 기존 데이터 재분석 필요 여부 판단
3. ⏳ 2단계(세계관 발견) 개선 검토

---

## 📊 기대 효과

**개선 전 (현재)**:
- 표면층에 메타 표현 포함 ("보라고 권유")
- 단순 사실 포함 ("제한통고가 나왔다")
- 세계관 무관 내용 혼입

**개선 후 (V4 적용)**:
- 정치적 판단만 추출
- 의도/목적 해석 포함
- 3층 구분 명확
- 세계관 형성에 직접 기여

**예상 품질 향상**: 30-50% ⬆️

---

**작성 완료**: 2025-10-14

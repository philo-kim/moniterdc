# 심층 세계관 분석 아키텍처

## 목표
"여당 지지자가 이해할 수 있도록" 세계관의 작동 원리를 **실체적으로** 분석

---

## 현재 vs 필요한 것

### ❌ 현재 (표면적)
```
"민주당이 사찰한다"는 주장이 있다
→ 뒤에는 "과거 독재 반복" 믿음이 있다
```

### ✅ 필요한 것 (실체적)
```
"민주당이 사찰한다"
  ↓ 왜?
"유심교체 정보를 알았다"
  ↓ 어떻게?
"통신사를 협박했을 것" (논리 비약!)
  ↓ 왜 그렇게 생각?
"과거 독재정권이 그랬다" (역사 연결)
  ↓ 왜 과거가 반복?
"권력은 본질적으로 부패한다" (핵심 믿음)
```

---

## 구현할 4개 분석기

### 1. CausalRelationshipAnalyzer
**목적**: 믿음 간 인과관계 파악

**입력**:
- 같은 글의 3개 믿음
- 예: A="권력은 부패", B="민주당 권력남용", C="사찰 시작"

**처리**:
```python
# GPT에게 질문
"이 3개 믿음 중:
1. 어떤 것이 다른 것을 정당화하는가?
2. 어떤 것이 결과이고 어떤 것이 원인인가?
3. 논리적 의존 관계는?"

# 출력
{
  "core": "권력은 부패",
  "supports": ["민주당 권력남용"],
  "derived": ["사찰 시작"],
  "causal_chain": ["권력 부패 → 남용 → 사찰"]
}
```

**실체화**:
- DB에 `belief_causality` 테이블
- `cause_belief_id`, `effect_belief_id`, `strength`, `reasoning`

---

### 2. HistoricalContextLinker
**목적**: 현재 해석이 어떤 과거 사건과 연결되는지 파악

**입력**:
- 현재 주장: "민주당이 유심교체 정보 알아냄"
- 심층 믿음: "독재정권처럼 사찰"

**처리**:
```python
# 역사 사건 DB 조회
historical_events = [
    {"event": "1980년대 안기부 전화도청", "keywords": ["도청", "사찰", "통신"]},
    {"event": "박정희 KCIA 민간인 사찰", "keywords": ["사찰", "정보", "반대파"]},
    ...
]

# GPT에게 질문
"현재 주장 '유심교체 정보 획득'과 가장 유사한 과거 사건은?
왜 이 과거가 현재와 연결되는가?"

# 출력
{
  "linked_event": "1980년대 안기부 전화도청",
  "similarity": "통신 정보 불법 획득",
  "projection": "작은 시작 → 전면 감시로 발전",
  "fear": "과거처럼 독재 체제로 회귀"
}
```

**실체화**:
- `historical_links` 테이블
- `current_claim`, `past_event`, `similarity_reason`, `projection_logic`

---

### 3. LogicalLeapDetector
**목적**: 논리적 비약 지점 명확화

**입력**:
- 표면: "유심교체를 어떻게 알았나"
- 암묵: "통신사를 협박해서 얻었다"

**처리**:
```python
# GPT에게 질문
"A에서 B로 가는데 무슨 가정이 필요한가?
생략된 추론 단계는?"

# 출력
{
  "claim_a": "유심교체 정보를 알았다",
  "claim_b": "통신사를 협박했다",
  "leap": {
    "missing_steps": [
      "정보 획득 방법은 여러가지 (정상 경로 가능)",
      "하지만 불법 방법이라고 단정",
      "왜? 민주당은 본질적으로 불법을 저지른다는 전제"
    ],
    "assumption": "민주당 = 본질적으로 불법 집단",
    "evidence_gap": "실제 협박 증거 없음, 추론일 뿐"
  }
}
```

**실체화**:
- `logical_leaps` 테이블
- `from_claim`, `to_claim`, `missing_steps`, `hidden_assumption`

---

### 4. CoreBeliefClassifier
**목적**: 핵심 믿음 vs 파생 믿음 구분

**입력**:
- 모든 믿음 + 인과관계 그래프

**처리**:
```python
# 그래프 분석
# 핵심 믿음 = 다른 믿음의 원인이지만 자신은 원인이 없음
# 파생 믿음 = 다른 믿음에서 나옴

# 출력
{
  "core_beliefs": [
    {
      "belief": "과거 독재가 현재 반복된다",
      "supports_count": 15,  # 15개 믿음의 근거
      "evidence": "1980년대 경험, 권력 본질론"
    }
  ],
  "derived_beliefs": [
    {
      "belief": "민주당이 사찰한다",
      "derived_from": ["과거 독재 반복", "권력은 부패"],
      "logic": "과거 독재 → 현재 = 민주당 → 사찰 수단 사용"
    }
  ]
}
```

**실체화**:
- `belief_patterns` 테이블에 `is_core`, `derived_from_ids` 컬럼 추가

---

## 통합: WorldviewMechanismExplainer

**목적**: 위 4개 분석을 통합하여 "작동 원리" 설명 생성

**입력**: 특정 주장 (예: "민주당 사찰")

**출력**:
```markdown
# "민주당 사찰" 주장의 세계관 작동 원리

## 1. 표면 주장
"유심교체를 어떻게 알았나?"

## 2. 숨겨진 추론 (논리 비약)
- "정보를 알았다" → "통신사 협박으로 얻었다"
- 비약: 정상 경로 가능성 배제
- 숨은 가정: "민주당은 불법을 저지른다"

## 3. 과거 사건 연결
- 유사 사건: "1980년대 안기부 전화도청"
- 연결 논리: "작은 사찰 → 전면 감시" 패턴
- 두려움: "과거처럼 독재로 발전"

## 4. 핵심 믿음
- 뿌리: "과거 독재가 현재 반복된다"
- 지지 믿음: "권력은 본질적으로 부패"
- 파생: "민주당 = 권력 = 부패 = 사찰"

## 5. 여당 지지자를 위한 해설
이들이 "작은 정보 유출"도 "독재 시작"으로 보는 이유:
1. 1980년대 경험: "작은 시작"이 "전면 통제"로 발전했음
2. 권력 본질론: 권력은 필연적으로 감시와 억압으로 향함
3. 패턴 인식: 현재가 과거와 똑같은 경로를 밟고 있다고 봄

반박 포인트:
- 정보 획득 경로 불명확 (추론일 뿐)
- 과거와 현재의 구조적 차이 (민주주의 제도)
- 패턴의 필연성 아님 (다른 가능성 존재)
```

---

## 구현 순서

1. **HistoricalContextLinker** 먼저
   - 과거 사건 DB 구축 (1980s~2000s 주요 사건)
   - 연결 로직 구현

2. **LogicalLeapDetector**
   - 표면→암묵 비약 찾기
   - 암묵→심층 비약 찾기

3. **CausalRelationshipAnalyzer**
   - 믿음 간 의존 관계
   - 그래프 생성

4. **CoreBeliefClassifier**
   - 그래프 기반 핵심/파생 분류

5. **WorldviewMechanismExplainer**
   - 위 4개 통합
   - 자연어 설명 생성

---

## 검증 기준

완성 후 실제 글 1개로 테스트:
- ✅ 논리 비약 지점이 명확히 보이는가?
- ✅ 과거 사건 연결이 구체적인가?
- ✅ 인과관계가 설득력 있는가?
- ✅ 여당 지지자가 "아, 그래서 그렇구나" 이해하는가?

만약 "그냥 GPT가 그럴듯하게 쓴 것"처럼 보이면 **실패**.
"실제로 이런 논리 구조구나" 느껴지면 **성공**.

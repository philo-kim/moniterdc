# 세계관 세분화 수준 분석

**문제 제기**: 현재 생성된 세계관이 너무 일반적/포괄적

---

## 문제 진단

### 현재 V1+ 결과 (너무 포괄적)

```
❌ "민주당은 불법 사찰로 국민을 감시한다"
   → 이건 카테고리이지 구체적 세계관이 아님
   → 유심, 통신사, 사법부 장악 등 모든 것을 뭉뚱그림

❌ "정부는 사법을 정치보복에 악용한다"
   → 모든 사법 관련 담론을 포괄
   → 체포, 기소, 수사 등 구체적 맥락 손실

❌ "중국은 매크로로 여론을 조작한다"
   → 댓글부대, 장기밀매, 시장독점 등을 구분 못함
```

### 실제 perception은 훨씬 구체적

```
✅ "좌파는 역사적으로 국가를 외세에 종속시키는 경향이 있다"
✅ "정부는 중요한 인물을 보호하기 위해 여론을 조작한다"
✅ "정부는 권력 유지를 위해 억압적인 수단을 사용한다"
✅ "정부는 권력 강화를 위해 개인의 자유를 억압할 수 있다"
```

**문제**: 5-10개 세계관으로 묶으면 이런 구체성이 모두 사라짐

---

## 해결 방안

### 방안 1: 계층 구조 (Parent-Child Worldviews)

#### 구조
```
상위 세계관 (5-10개)
  └─ 하위 세계관 (각 상위당 3-5개)
```

#### DB 스키마 수정
```sql
ALTER TABLE worldviews ADD COLUMN parent_worldview_id UUID REFERENCES worldviews(id);
ALTER TABLE worldviews ADD COLUMN level INTEGER DEFAULT 1; -- 1: parent, 2: child
```

#### 예시

**상위 세계관 1**: "좌파/민주당의 권력 강화 시도"
```
├─ 하위 1-1: "민주당은 통신사를 협박해 유심 정보를 빼낸다"
│   트리거: 민주당이 유심교체 정보를 알고 있음
│   결론: 통신사 협박을 통한 불법 사찰
│
├─ 하위 1-2: "민주당은 사법부를 장악해 정적을 체포한다"
│   트리거: 이진숙 등 야당 인사 체포
│   결론: 사법부 장악을 통한 정치보복
│
├─ 하위 1-3: "민주당은 계엄으로 국회를 무력화하려 했다"
│   트리거: 계엄 선포 및 국회 진입 시도
│   결론: 독재 획책
│
└─ 하위 1-4: "민주당은 집회를 금지해 우파를 억압한다"
    트리거: 자유대학 집회 제한
    결론: 우파 세력 탄압
```

**상위 세계관 2**: "중국의 한국 침투 및 장악"
```
├─ 하위 2-1: "중국 댓글부대가 DC 여론을 조작한다"
│   트리거: 반복적 고닉 패턴
│   결론: 중국발 매크로 여론조작
│
├─ 하위 2-2: "중국 조선족이 장기밀매로 한국인을 죽인다"
│   트리거: 실종 사건 증가
│   결론: 조직적 장기밀매 범죄
│
├─ 하위 2-3: "중국 기업이 쿠팡으로 한국 시장을 독점한다"
│   트리거: 쿠팡 중국 물류 증가
│   결론: 시장 왜곡 및 경제 침투
│
└─ 하위 2-4: "중국이 한국 정치에 내정간섭한다"
    트리거: 중국 정부 발언
    결론: 주권 침해
```

**상위 세계관 3**: "정부/사법의 정치보복"
```
├─ 하위 3-1: "윤석열 정부는 이재명을 제거하려 한다"
├─ 하위 3-2: "법무부는 페이스북 글로 반대자를 모욕한다"
└─ 하위 3-3: "검찰은 좌파 편향으로 우파를 기소한다"
```

---

### 방안 2: 모두 동등한 세계관 (Flat Structure, 세분화)

#### 구조
```
세계관 20-30개 (모두 동등)
```

#### 예시
```
1. 민주당은 통신사를 협박해 유심 정보를 빼낸다
2. 민주당은 사법부를 장악해 정적을 체포한다
3. 민주당은 계엄으로 국회를 무력화하려 했다
4. 민주당은 집회를 금지해 우파를 억압한다
5. 중국 댓글부대가 DC 여론을 조작한다
6. 중국 조선족이 장기밀매로 한국인을 죽인다
7. 중국 기업이 한국 시장을 독점한다
8. 정부는 이재명을 제거하려 한다
9. 법무부는 페이스북으로 우파를 모욕한다
10. 검찰은 좌파 편향으로 우파를 기소한다
...
(20-30개)
```

**장점**:
- 각 세계관이 매우 구체적
- perception과 직접 매칭 용이
- 구조 단순

**단점**:
- 너무 많아서 전체 파악 어려움
- 비슷한 세계관 구분 어려움
- UI에서 표시 복잡

---

## 두 방안 비교

| 측면 | 방안 1: 계층 구조 | 방안 2: Flat 세분화 |
|------|-----------------|-------------------|
| 구체성 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 전체 파악 | ⭐⭐⭐⭐ | ⭐⭐ |
| 구현 복잡도 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| UI 표시 | ⭐⭐⭐⭐ | ⭐⭐ |
| 확장성 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

---

## 추천: 방안 1 (계층 구조) ⭐

### 이유

1. **구체성 + 파악 용이성 균형**
   - 상위: 큰 틀 이해
   - 하위: 구체적 세계관

2. **현실 담론 구조와 일치**
   - "민주당 독재론"은 실제로 여러 하위 사례로 구성됨
   - "중국 위협론"도 마찬가지

3. **UI 친화적**
   - 메인: 5-10개 상위 세계관만 표시
   - 클릭: 하위 세계관 펼치기
   - 드릴다운 탐색 가능

4. **진화 관리 용이**
   - 상위는 안정적 (독재론, 중국위협론 등)
   - 하위만 추가/삭제 (새 사건 발생 시)

---

## 계층 구조 구현 방안

### 1단계: 상위 세계관 생성 (5-10개)

**현재처럼 GPT-5로 생성하되, 더 포괄적으로**:
```
1. 좌파/민주당의 권력 강화 및 독재 시도
2. 중국의 한국 침투 및 장악
3. 정부/사법의 정치보복 및 탄압
4. 언론의 좌파 편향 및 여론 조작
5. 보수의 정당성 및 민심 대표
...
```

### 2단계: 각 상위 세계관에 대해 하위 세계관 생성 (3-5개씩)

**GPT-5 추가 요청**:
```python
prompt = f"""
상위 세계관: "{parent_worldview_title}"

이 상위 세계관에 속하는 구체적인 하위 세계관 3-5개를 생성하세요.

**하위 세계관 요구사항**:
1. 매우 구체적: 특정 사건/방법/대상 명시
2. 차별화: 서로 다른 구체적 사례
3. 그들의 언어: 단정적 사실 진술
4. 구조: [주어] + [구체적 방법] + [구체적 행위] + [구체적 대상]

예시:
상위: "좌파/민주당의 권력 강화 및 독재 시도"

하위:
- "민주당은 통신사를 협박해 유심 정보를 빼낸다"
- "민주당은 사법부를 장악해 정적을 체포한다"
- "민주당은 계엄으로 국회를 무력화하려 했다"
"""
```

### 3단계: DB 저장

```python
# Parent worldview
parent_wv = {
    'title': '좌파/민주당의 권력 강화 및 독재 시도',
    'level': 1,
    'parent_worldview_id': None,
    ...
}
parent_id = supabase.table('worldviews').insert(parent_wv).execute().data[0]['id']

# Child worldviews
for child_data in child_worldviews:
    child_wv = {
        'title': '민주당은 통신사를 협박해 유심 정보를 빼낸다',
        'level': 2,
        'parent_worldview_id': parent_id,
        ...
    }
    supabase.table('worldviews').insert(child_wv).execute()
```

### 4단계: UI 표시

```typescript
// Main page: Parent worldviews only
<WorldviewList worldviews={parentWorldviews} />

// Click to expand
<WorldviewDetail worldview={parent}>
  <ChildWorldviews worldviews={childWorldviews} />
</WorldviewDetail>

// Perception matching: Child worldviews
<PerceptionCard>
  <WorldviewBadge>
    상위: 민주당 독재론
    하위: 민주당은 통신사를 협박해 유심 정보를 빼낸다
  </WorldviewBadge>
</PerceptionCard>
```

---

## 기대 효과

### Before (현재)
```
세계관: 민주당/좌파의 정보 파악 → 즉시 불법 사찰·장악으로 해석
  - 501개 perception 중 80개 매칭
  - 너무 포괄적, 구체적 차이 파악 불가
```

### After (계층 구조)
```
상위: 좌파/민주당의 권력 강화 및 독재 시도 (80개)
  ├─ 하위: 민주당은 통신사를 협박해 유심 정보를 빼낸다 (12개)
  ├─ 하위: 민주당은 사법부를 장악해 정적을 체포한다 (25개)
  ├─ 하위: 민주당은 계엄으로 국회를 무력화하려 했다 (18개)
  └─ 하위: 민주당은 집회를 금지해 우파를 억압한다 (15개)

  → 각 하위 세계관이 구체적
  → 시간에 따른 담론 변화 추적 가능
  → perception과 정확한 매칭
```

---

## 구현 단계

1. **DB 스키마 수정**
   ```sql
   ALTER TABLE worldviews ADD COLUMN parent_worldview_id UUID;
   ALTER TABLE worldviews ADD COLUMN level INTEGER DEFAULT 1;
   ```

2. **worldview_evolution_engine.py 수정**
   - 1단계: 상위 세계관 생성 (5-10개)
   - 2단계: 각 상위에 대해 하위 생성 (3-5개씩)

3. **mechanism_matcher.py 수정**
   - Child worldview에 매칭
   - Parent는 child 카운트 합산

4. **Dashboard UI 수정**
   - Parent 목록 표시
   - Expandable child 리스트
   - Perception detail에 parent + child 표시

---

## 다음 단계

**질문**: 계층 구조로 가는 게 맞다면:
1. DB 스키마부터 수정할까요?
2. 프롬프트 테스트부터 할까요? (계층 생성 로직)

**또는** Flat 구조로 20-30개 세분화된 세계관을 선호하시나요?

---

**핵심 원칙**: 세계관은 구체적이어야 하며, perception 수준의 디테일을 보존해야 함

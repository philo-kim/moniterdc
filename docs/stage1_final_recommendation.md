# 1단계 최종 권장사항: 원칙 기반 프롬프트

**작성일**: 2025-10-14
**테스트**: 8개 다양한 게시글로 V4(예시) vs V5(원칙) 비교

---

## 📊 테스트 결과 요약

### 양적 비교

| 게시글 | 유형 | V4_예시 | V5_원칙 | 차이 |
|--------|------|---------|---------|------|
| 글1 | 민주당 사찰 | E=2 I=2 D=2 | E=2 I=2 D=2 | ✅ 동일 |
| 글2 | 법무장관 비판 | E=4 I=3 D=3 | E=3 I=2 D=2 | V4가 더 많음 |
| 글3 | 중국 자동차 | E=3 I=3 D=2 | E=2 I=2 D=2 | V4가 더 많음 |
| 글4 | 국방 정책 | E=2 I=2 D=2 | E=2 I=2 D=2 | ✅ 동일 |
| 글5 | 중국 범죄 | E=2 I=2 D=2 | E=1 I=2 D=2 | V5가 더 적음 |
| 글6 | 김일성 손녀 | E=2 I=2 D=2 | E=1 I=2 D=2 | V5가 더 적음 |
| 글7 | 원산지 제도 | E=2 I=2 D=2 | E=2 I=2 D=2 | ✅ 동일 |
| 글8 | 맘카페 집회 | E=3 I=2 D=2 | E=2 I=2 D=2 | V4가 더 많음 |

**평균 explicit_claims 개수**:
- V4 (예시 기반): 2.5개
- V5 (원칙 기반): 1.9개

---

## 🔍 질적 분석

### Case 1: V5의 강점 - 더 정확한 필터링

**글5**: "이영돈 신작 충격적이네ㄷㄷ 다들 꼭 봐라"

**V4 추출**:
```
1. 중국의 장기밀매조직이 국내에 잠입할 수 있다.
2. 최근 온라인 맘카페 등에 실종 신고가 급증했다.  ← ⚠️ 단순 관찰
```

**V5 추출**:
```
1. 중국의 범죄조직 특히 장기밀매조직이 국내에 잠입할 수 있다
```

**분석**:
- V4는 "맘카페에 실종 신고가 급증했다"를 포함 → 이건 **사실 전달**이지 **해석**이 아님
- V5는 이를 제외 → **원칙**을 더 잘 이해함
- **V5의 승리** ✅

---

### Case 2: V5의 강점 - 더 본질적 추출

**글6**: "김현지 = Nirvana0415 = 김일성 손녀"

**V4 추출**:
```
1. 퀸진숙 체포는 미친짓이다  ← ⚠️ 감정 표현
2. 김현지가 김일성의 손녀다  ← ⚠️ 단순 주장
```

**V5 추출**:
```
1. 김현지가 김일성의 손녀라는 사실이 퀸진숙 체포의 이유가 된다  ← ✅ 인과 해석
```

**분석**:
- V4는 개별 주장 2개로 분리
- V5는 **인과관계 해석** 1개로 통합
- V5가 더 **본질적** ✅

---

### Case 3: V4의 강점 - 더 완전한 포착

**글2**: "법무부장관이라는게 저딴 페북글이나 올리고있어?"

**V4 추출** (4개):
```
1. 법무부장관이 페이스북에 부적절한 글을 올리고 있다
2. 법무부장관이 허위사실을 공표했다
3. 법무부장관이 인권을 무시하고 있다
4. 법무부장관의 행위는 정치적 보복이다
```

**V5 추출** (3개):
```
1. 법무부장관이 페이스북에 부적절한 글을 올리고 있다
2. 법무부장관의 행동은 정치적 보복이다
3. 법무부장관의 행동은 법의 평등성을 위배한다
```

**분석**:
- V4는 "허위사실 공표", "인권 무시"를 명시적으로 추출
- V5는 "법의 평등성 위배"로 일반화
- 세계관 형성에는 **구체적 주장들이 유용**할 수 있음
- **V4의 승리** (이 경우) ⚠️

---

## 💡 핵심 인사이트

### V5(원칙)의 장점

1. **더 높은 일관성**
   - 원칙을 이해하면 새로운 상황에도 적용 가능
   - 예시에 없는 패턴도 올바르게 처리

2. **더 정확한 필터링**
   - "맘카페에 실종 글 많다" 같은 사실 전달 제외
   - "충격적이다" 같은 메타 표현 자동 제외

3. **더 본질적 추출**
   - 개별 주장 나열이 아닌 **인과관계 해석**
   - 표면 → 구조 파악

4. **확장성**
   - 구체적 예시는 5-10개로 제한
   - 원칙은 무한한 변형에 대응

### V4(예시)의 장점

1. **더 완전한 포착**
   - 다면적인 주장을 놓치지 않음
   - 세부 내용 보존

2. **즉시 이해 가능**
   - 예시로 바로 학습
   - 추상적 사고 불필요

---

## 🎯 최종 권장사항

### **채택**: V5 (원칙 기반) + 보완

**이유**:
1. **장기적 품질**: 원칙이 예시보다 지속 가능
2. **일관성**: 다양한 글에서 더 안정적
3. **본질 파악**: 사실 전달 vs 해석 구분 명확
4. **확장성**: 새로운 패턴에도 적응

**보완 방법**:
V5 원칙에 **최소한의 예시 1-2개** 추가 (하이브리드)

---

## 📝 최종 프롬프트 (V5 개선판)

```python
def get_optimized_prompt_v5_plus(content):
    return f"""
다음은 DC Gallery 정치 담론입니다:

제목: {content['title']}
내용: {content['body'][:2000]}

---

이 담론의 **3층 인식 구조**를 추출하세요.

## 핵심 원칙

### 1. 표면층 (Explicit Claims) - 정치적 해석만

**본질**: 글쓴이가 이 사건을 **어떻게 해석하는가**

**포함 조건**:
- 정치 행위자의 **의도/목적**에 대한 판단
- 사건의 **의미**에 대한 해석
- **누가 왜 그렇게 했다**는 주장

**제외 조건**:
- 사실 전달 (뉴스 인용, 관찰 보고)
- 메타 담화 (권유, 요청, 감정 표현)
- 증거 나열 (단순 정보 제시)

**핵심 질문**: "이 글쓴이는 이 사건이 **무엇을 의미한다**고 보는가?"

**예시**:
- ✅ "민주당이 통신사를 협박해 개인정보를 얻는다" (의도 해석)
- ❌ "맘카페에 실종 글이 많다" (사실 전달)
- ❌ "영상을 꼭 보라" (메타 표현)

---

### 2. 암묵층 (Implicit Assumptions) - 일반 패턴

**본질**: 글쓴이가 **당연하게 여기는** 행위 패턴

**특징**:
- 이번 사건을 넘어선 **일반화**
- "~는 원래/항상/늘 ~한다"
- 행위자의 **습관적 행동 방식**

**핵심 질문**: "이 글쓴이는 [행위자]가 **일반적으로 어떻게** 행동한다고 믿는가?"

---

### 3. 심층 (Deep Beliefs) - 세계관

**본질**: 글쓴이 **진영의 세계관**

**특징**:
- 행위자의 **본질** 규정
- **역사적 연결** (과거 → 현재)
- **세상의 작동 원리** (A면 필연적으로 B)

**핵심 질문**: "이 진영은 세상과 역사를 **어떻게** 이해하는가?"

---

## 층 구분 원리

```
표면층: 이번 사건 해석 (구체적)
   ↓ 일반화
암묵층: 행위자 패턴 (중범위)
   ↓ 본질화
심층: 세계관/역사관 (추상적)
```

각 층은 **점진적으로 추상화**되어야 합니다.

---

## 추가 분석

- **mechanisms**: 사용된 추론 메커니즘 (즉시_단정, 필연적_인과, 표면_부정, 역사_투사, 네트워크_추론)
- **actor**: 행위 주체 (subject), 목적 (purpose), 수단 (methods)
- **logic_chain**: 추론의 단계별 흐름

---

JSON 형식:
{{
  "mechanisms": ["즉시_단정", "필연적_인과"],
  "actor": {{
    "subject": "민주당/좌파",
    "purpose": "권력 유지",
    "methods": ["사찰", "협박"]
  }},
  "logic_chain": [
    "민주당이 정보를 파악했다",
    "합법 취득 가능성을 배제했다",
    "불법 사찰로 단정했다",
    "독재 시도로 해석했다"
  ],
  "explicit_claims": [
    "이번에 민주당이 통신사를 협박해 개인정보를 불법 취득했다",
    "민주당이 맘에 안드는 판사를 표적 사찰한다"
  ],
  "implicit_assumptions": [
    "민주당은 항상 통신사를 협박해 반대파 정보를 얻는다",
    "사법부 인사까지 사찰 대상으로 삼는다"
  ],
  "deep_beliefs": [
    "좌파는 과거 독재정권처럼 사찰로 권력을 유지한다",
    "지금의 작은 사찰이 전면적 감시독재 사회로 발전한다"
  ]
}}
"""
```

---

## 🔄 V4 vs V5+ 비교

| 특성 | V4 (예시 5개) | V5+ (원칙 + 예시 1-2개) |
|------|---------------|-------------------------|
| 이해 난이도 | 쉬움 | 중간 |
| 일관성 | 중간 | 높음 |
| 확장성 | 낮음 | 높음 |
| 필터링 정확도 | 중간 | 높음 |
| 포착 완전성 | 높음 | 중상 |
| 프롬프트 길이 | 길다 | 중간 |
| 비용 | 높음 | 중간 |

---

## 🚀 적용 전략

### 1단계: V5+ 프롬프트 적용
- `reasoning_structure_extractor.py`에 V5+ 프롬프트 적용
- 신규 데이터부터 V5+로 분석

### 2단계: 샘플 검증
- 기존 분석 결과와 비교
- 20-30개 샘플로 품질 확인

### 3단계: 전면 적용
- 품질 확인 후 전체 파이프라인에 적용
- 기존 데이터 재분석 여부는 선택

---

## 📈 기대 효과

### 품질 개선
- **필터링 정확도**: 60% → 85% (예상)
- **3층 구분 명확도**: 70% → 90% (예상)
- **일관성**: 75% → 95% (예상)

### 실질적 개선
1. **메타 표현 제거**: "보라", "충격적" 등 제외
2. **사실 전달 제거**: "맘카페에 글 많다" 등 제외
3. **본질적 해석 포착**: 개별 주장 → 인과 구조
4. **3층 점진적 추상화**: 구체적 → 일반 → 본질

---

## 🎓 핵심 교훈

### "원칙 > 예시"

**이유**:
1. 예시는 제한적, 원칙은 범용적
2. 예시는 특정 케이스, 원칙은 본질
3. 예시는 암기, 원칙은 이해

**단, 예시의 역할**:
- 원칙의 **구체적 설명**
- 즉시 **이해 촉진**
- 경계 케이스 **명확화**

→ **하이브리드**: 원칙 중심 + 최소 예시 (1-2개)

---

**작성 완료**: 2025-10-14
**최종 권장**: V5+ (원칙 기반 + 최소 예시)
